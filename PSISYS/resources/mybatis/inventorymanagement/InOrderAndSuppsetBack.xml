<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="SuppsetbillMapper">
	
	<!--表名 -->
	<sql id="inBackTableName">
		psi_inorder_back
	</sql>
	<!--表名 -->
	<sql id="inBodyBackTableName">
		psi_inorder_body_back
	</sql>
	<!--表名 -->
	<sql id="suppBackTableName">
		psi_suppsetbill_back
	</sql>
	<sql id="InAllField">
		INORDER_ID,     
		LDATE,          
		BILLCODE,       
		SUPPLIER_ID,    
		USER_ID,        
		WAREHOUSE_ID,   
		ALLAMOUNT,      
		BILLTYPE,       
		BILLSTATUS,     
		PAIDAMOUNT,     
		UNPAIDAMOUNT,   
		THISPAY,        
		SUBBRANCH,      
		SUPPSETBILL_ID, 
		DEFAULTE,       
		ISSETTLEMENTED, 
		SETTEDNUMANDID, 
		PK_SOBOOKS,     
		DEF1,           
		DEF2,           
		DEF3,           
		DEF4,           
		DEF5,           
		CREATETIME,     
		LASTTIME,       
		DR            
	</sql>
	<sql id="InBodyAllField">
		INORDERBODY_ID,    
		INORDER_ID,        
		GOODCODE_ID,       
		PNUMBER,           
		UNITPRICE_ID,      
		AMOUNT,            
		APPBILLNO,         
		DEFAULTE,          
		SETTEDNUMANDID,    
		PK_SOBOOKS,        
		DEF1,              
		DEF2,              
		DEF3,              
		DEF4,              
		DEF5,              
		CREATETIME,        
		LASTTIME,          
		DR
	</sql>
	<sql id="SuppAllField">
			SUPPSETBILL_ID,                                              
			  LDATE,                                                       
			  BILLCODE,                                                    
			  BILLTYPE,                                                    
			  BILLSTATUS,                                                  
			  USER_ID,                                                     
			  FROMUNIT,                                                    
			  DISTRIBUTIONMODE,                                            
			  INVOICETYPE,                                                 
			  BILLNO,                                                      
			  PAYMETHOD,                                                   
			  PAYABLEAMOUNT,                                               
			  PAYMENTAMOUNT,                                               
			  PAYABLEALLAM,
			  SETTEDNUMANDID,  
			  INORDER_IDS,                                              
			  NOTE,                                                        
			  PK_SOBOOKS,
			  DEF1,
			  DEF2,
			  DEF3,
			  DEF4,
			  DEF5,
			  CREATETIME,
			  LASTTIME,
			  DR
	</sql>
	
	<sql id="InAllFieldValue">
		#{INORDER_ID},        
		#{LDATE},             
		#{BILLCODE},          
		#{SUPPLIER_ID},       
		#{USER_ID},           
		#{WAREHOUSE_ID},      
		#{ALLAMOUNT},         
		#{BILLTYPE},          
		#{BILLSTATUS},        
		#{PAIDAMOUNT},        
		#{UNPAIDAMOUNT},      
		#{THISPAY},           
		#{SUBBRANCH},         
		#{SUPPSETBILL_ID},    
		#{DEFAULTE},          
		#{ISSETTLEMENTED},    
		#{SETTEDNUMANDID},    
		#{PK_SOBOOKS},        
		#{DEF1},              
		#{DEF2},              
		#{DEF3},              
		#{DEF4},              
		#{DEF5},              
		#{CREATETIME},        
		#{LASTTIME},          
		#{DR}                
	</sql>
	<sql id="InBodyAllFieldValue">
		#{INORDERBODY_ID}, 
		#{INORDER_ID},     
		#{GOODCODE_ID},    
		#{PNUMBER},         
		#{UNITPRICE_ID},    
		#{AMOUNT},          
		#{APPBILLNO},       
		#{DEFAULTE},        
		#{SETTEDNUMANDID},  
		#{PK_SOBOOKS},      
		#{DEF1},            
		#{DEF2},            
		#{DEF3},            
		#{DEF4},            
		#{DEF5},            
		#{CREATETIME},      
		#{LASTTIME},        
		#{DR}
	</sql>
	
	<!-- 字段值 -->
	<sql id="SuppAllFieldValue">
	    #{SUPPSETBILL_ID},     
		#{LDATE},              
		#{BILLCODE},           
		#{BILLTYPE},           
		#{BILLSTATUS},         
		#{USER_ID},            
		#{FROMUNIT},           
		#{DISTRIBUTIONMODE},   
		#{INVOICETYPE},        
		#{BILLNO},             
		#{PAYMETHOD},          
		#{PAYABLEAMOUNT},      
		#{PAYMENTAMOUNT},      
		#{PAYABLEALLAM},
		#{SETTEDNUMANDID},  
		#{INORDER_IDS},        
		#{NOTE},               
		#{PK_SOBOOKS},
		#{DEF1},
		#{DEF2},
		#{DEF3},
		#{DEF4},
		#{DEF5},
		#{CREATETIME},
		#{LASTTIME},
		#{DR}
	</sql>
	
	<!-- 新增-->
	<insert id="savesuppback" parameterType="pd">
		insert into 
	<include refid="suppBackTableName"></include>
		(
	<include refid="SuppAllField"></include>
		) values (
	<include refid="SuppAllFieldValue"></include>
		)
	</insert>
	
	<!-- 删除-->
	<update id="deletesuppback" parameterType="pd">
		update 
		<include refid="suppBackTableName"></include>
		set
			DR = 1 
		where 
			SUPPSETBILL_ID = #{SUPPSETBILL_ID}
			and PK_SOBOOKS = #{PK_SOBOOKS}
	</update>
	
	<!-- 修改 -->
	<update id="editsuppback" parameterType="pd">
		update
		<include refid="suppBackTableName"></include>
		set                                                                                                       
			<include refid="SuppAllFieldValue"></include>
		where 
			PK_SOBOOKS = #{PK_SOBOOKS} and
			SUPPSETBILL_ID = #{SUPPSETBILL_ID}
			and IFNULL(DR,0)=0
	</update>
	
	<!-- 通过ID获取数据 -->
	<select id="findSuppBackById" parameterType="pd" resultType="pd">
		select 
		<include refid="SuppAllField"></include>
		from 
		<include refid="suppBackTableName"></include>
		where 
			SUPPSETBILL_ID = #{SUPPSETBILL_ID}
			and PK_SOBOOKS = #{PK_SOBOOKS}
			and IFNULL(DR,0)=0
	</select>
	<!-- 新增-->
	<insert id="saveinback" parameterType="pd">
		insert into 
	<include refid="inBackTableName"></include>
		(
	<include refid="InAllField"></include>
		) values (
	<include refid="InAllFieldValue"></include>
		)
	</insert>
	
	<!-- 删除-->
	<update id="deleteinback" parameterType="pd">
		update 
		<include refid="inBackTableName"></include>
		set
			DR = 1 
		where 
			INORDER_ID = #{INORDER_ID}
			and PK_SOBOOKS = #{PK_SOBOOKS}
	</update>
	
	<!-- 修改 -->
	<update id="editinback" parameterType="pd">
		update
		<include refid="inBackTableName"></include>
		set                                                                                                       
			<include refid="InAllFieldValue"></include>
		where 
			PK_SOBOOKS = #{PK_SOBOOKS} and
			INORDER_ID = #{INORDER_ID}
			and IFNULL(DR,0)=0
	</update>
	
	<!-- 通过ID获取数据 -->
	<select id="findInBackById" parameterType="pd" resultType="pd">
		select 
		<include refid="InAllField"></include>
		from 
		<include refid="inBackTableName"></include>
		where 
			INORDER_ID = #{INORDER_ID}
			and PK_SOBOOKS = #{PK_SOBOOKS}
			and IFNULL(DR,0)=0
	</select>
	
	
	
	
	<!--     进货单明细的CRUD          -->
	
	<!-- 新增-->
	<insert id="saveinbodyback" parameterType="pd">
		insert into 
	<include refid="inBodyBackTableName"></include>
		(
	<include refid="InBodyAllField"></include>
		) values (
	<include refid="InBodyAllFieldValue"></include>
		)
	</insert>
	
	<!-- 删除-->
	<update id="deleteinbodyback" parameterType="pd">
		update 
		<include refid="inBodyBackTableName"></include>
		set
			DR = 1 
		where 
			INORDERBODY_ID = #{INORDERBODY_ID}
			and PK_SOBOOKS = #{PK_SOBOOKS}
	</update>
	
	<!-- 修改 -->
	<update id="editinbodyback" parameterType="pd">
		update
		<include refid="inBodyBackTableName"></include>
		set                                                                                                       
			<include refid="InBodyAllFieldValue"></include>
		where 
			PK_SOBOOKS = #{PK_SOBOOKS} and
			INORDERBODY_ID = #{INORDERBODY_ID}
			and IFNULL(DR,0)=0
	</update>
	
	<!-- 通过ID获取数据 -->
	<select id="findInBodyBackById" parameterType="pd" resultType="pd">
		select 
		<include refid="InBodyAllField"></include>
		from 
		<include refid="inBodyBackTableName"></include>
		where 
			INORDERBODY_ID = #{INORDERBODY_ID}
			and PK_SOBOOKS = #{PK_SOBOOKS}
			and IFNULL(DR,0)=0
	</select>
	
	
</mapper>